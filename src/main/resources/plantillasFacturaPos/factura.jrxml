<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports
              http://jasperreports.sourceforge.net/xsd/jasperreport.xsd"
              name="factura_termica"
              pageWidth="288"
              pageHeight="800"
              columnWidth="268"
              leftMargin="10"
              rightMargin="10"
              topMargin="10"
              bottomMargin="10"
              whenNoDataType="AllSectionsNoDetail"
              uuid="b12a1f2e-5a77-4e9e-bc6e-1234567890aa">

    <!-- Parámetros -->
    <parameter name="empresa" class="java.lang.String"/>
    <parameter name="nit" class="java.lang.String"/>
    <parameter name="direccion" class="java.lang.String"/>
    <parameter name="telefono" class="java.lang.String"/>
    <parameter name="cliente" class="java.lang.String"/>
    <parameter name="fecha" class="java.lang.String"/>
    <parameter name="qr" class="java.lang.String"/>
    <parameter name="total" class="java.lang.Double"/>

    <!-- Campos -->
    <field name="producto" class="java.lang.String"/>
    <field name="cantidad" class="java.lang.Integer"/>
    <field name="precio" class="java.lang.Double"/>
    <field name="subtotal" class="java.lang.Double"/>

    <!-- Encabezado -->
    <title>
        <band height="90">
            <staticText>
                <reportElement x="0" y="0" width="268" height="20"/>
                <textElement textAlignment="Center">
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[$P{empresa}]]></text>
            </staticText>

            <textField>
                <reportElement x="0" y="20" width="268" height="12"/>
                <textElement textAlignment="Center"><font size="8"/></textElement>
                <textFieldExpression><![CDATA["NIT: " + $P{nit}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="0" y="32" width="268" height="12"/>
                <textElement textAlignment="Center"><font size="8"/></textElement>
                <textFieldExpression><![CDATA[$P{direccion} + " - Tel: " + $P{telefono}]]></textFieldExpression>
            </textField>

            <line>
                <reportElement x="0" y="48" width="268" height="1"/>
            </line>

            <textField>
                <reportElement x="0" y="52" width="268" height="12"/>
                <textElement textAlignment="Left"><font size="8" isBold="true"/></textElement>
                <textFieldExpression><![CDATA["Cliente: " + $P{cliente}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="0" y="64" width="268" height="12"/>
                <textElement textAlignment="Left"><font size="8" isBold="true"/></textElement>
                <textFieldExpression><![CDATA["Fecha: " + $P{fecha}]]></textFieldExpression>
            </textField>

            <line>
                <reportElement x="0" y="78" width="268" height="1"/>
            </line>
        </band>
    </title>

    <!-- Detalle (productos) -->
    <detail>
        <band height="16">
            <textField>
                <reportElement x="0" y="0" width="120" height="12"/>
                <textElement textAlignment="Left"><font size="8"/></textElement>
                <textFieldExpression><![CDATA[$F{producto}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="120" y="0" width="40" height="12"/>
                <textElement textAlignment="Center"><font size="8"/></textElement>
                <textFieldExpression><![CDATA[$F{cantidad}.toString()]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="160" y="0" width="50" height="12"/>
                <textElement textAlignment="Right"><font size="8"/></textElement>
                <textFieldExpression><![CDATA[String.format("$ %.2f", $F{precio})]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="210" y="0" width="58" height="12"/>
                <textElement textAlignment="Right"><font size="8" isBold="true"/></textElement>
                <textFieldExpression><![CDATA[String.format("$ %.2f", $F{subtotal})]]></textFieldExpression>
            </textField>
        </band>
    </detail>

    <!-- Totales -->
    <summary>
        <band height="120">
            <line>
                <reportElement x="0" y="5" width="268" height="1"/>
            </line>

            <textField>
                <reportElement x="0" y="10" width="268" height="14"/>
                <textElement textAlignment="Right"><font size="10" isBold="true"/></textElement>
                <textFieldExpression><![CDATA["TOTAL: $" + String.format("%.2f", $P{total})]]></textFieldExpression>
            </textField>

            <image>
                <reportElement x="80" y="20" width="100" height="100"/>
                <imageExpression><![CDATA[$P{qr}]]></imageExpression>
            </image>

            <staticText>
                <reportElement x="0" y="105" width="268" height="12"/>
                <textElement textAlignment="Center"><font size="8" isItalic="true"/></textElement>
                <text><![CDATA[¡Gracias por su compra!]]></text>
            </staticText>
        </band>
    </summary>

</jasperReport>
